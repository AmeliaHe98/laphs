<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>live-photo.js - Documentation</title>

    <!--[if lt IE 9]>
        <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/main.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav class="nav">
    <h2 class="home-link"><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><details open><summary><a href="LivePhoto.html">LivePhoto</a></summary><ul class='methods'><li data-type='method'><a href="LivePhoto.html#load">load</a></li><li data-type='method'><a href="LivePhoto.html#play">play</a></li><li data-type='method'><a href="LivePhoto.html#stop">stop</a></li><li data-type='method'><a href="LivePhoto.html#preview">preview</a></li></ul></details></li></ul><h3>Namespaces</h3><ul><li><details open><summary><a href="LivePhotos.html">LivePhotos</a></summary><ul class='members'><li data-type='member'><a href="LivePhotos.html#.LivePhoto">LivePhoto</a></li></ul><ul class='methods'><li data-type='method'><a href="LivePhotos.html#.initialize">initialize</a></li><li data-type='method'><a href="LivePhotos.html#.addStyles">addStyles</a></li><li data-type='method'><a href="LivePhotos.html#.noStyles">noStyles</a></li><li data-type='method'><a href="LivePhotos.html#.cleanup">cleanup</a></li></ul></details></li></ul>
</nav>

<div id="main" class="main-container">
    
        <h1 class="page-title">live-photo.js</h1>
    

    



    
    <section>
        <article>
            <pre class="source linenums"><code><ol class="lines"><li id="line1" class="line"><span class="hljs-keyword">var</span> enableInlineVideo = <span class="hljs-built_in">require</span>(<span class="hljs-string">'iphone-inline-video'</span>);</li><li id="line2" class="line"><span class="hljs-keyword">var</span> touchEnabled = (<span class="hljs-string">'ontouchstart'</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">window</span>) || (navigator.maxTouchPoints &gt; <span class="hljs-number">0</span>) || (navigator.msMaxTouchPoints);</li><li id="line3" class="line"></li><li id="line4" class="line"><span class="hljs-comment">/**</span></li><li id="line5" class="line"><span class="hljs-comment"> * Create a video element that that can be played inline</span></li><li id="line6" class="line"><span class="hljs-comment"> *</span></li><li id="line7" class="line"><span class="hljs-comment"> * @param  {string} src - video URL</span></li><li id="line8" class="line"><span class="hljs-comment"> * @param  {string} [className] - CSS classname for the video element</span></li><li id="line9" class="line"><span class="hljs-comment"> * @param  {number} [time] - start time for the video</span></li><li id="line10" class="line"><span class="hljs-comment"> * @param  {boolean} [muted] - whether the video should start muted</span></li><li id="line11" class="line"><span class="hljs-comment"> *</span></li><li id="line12" class="line"><span class="hljs-comment"> * @return {DOMElement} the video element</span></li><li id="line13" class="line"><span class="hljs-comment"> *</span></li><li id="line14" class="line"><span class="hljs-comment"> * @private</span></li><li id="line15" class="line"><span class="hljs-comment"> */</span></li><li id="line16" class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createVideoElement</span>(<span class="hljs-params">src, className, time, muted</span>) </span>{</li><li id="line17" class="line">    <span class="hljs-keyword">var</span> video = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'video'</span>);</li><li id="line18" class="line">    video.src = src + (time ? <span class="hljs-string">'#'</span> + time : <span class="hljs-string">''</span>);</li><li id="line19" class="line">    video.controls = <span class="hljs-literal">false</span>;</li><li id="line20" class="line">    video.muted = muted || <span class="hljs-literal">false</span>;</li><li id="line21" class="line">    video.preload = <span class="hljs-string">'auto'</span>;</li><li id="line22" class="line">    <span class="hljs-keyword">if</span> (className) {</li><li id="line23" class="line">        video.className = className;</li><li id="line24" class="line">    }</li><li id="line25" class="line">    enableInlineVideo(video, !muted);</li><li id="line26" class="line">    <span class="hljs-keyword">return</span> video;</li><li id="line27" class="line">}</li><li id="line28" class="line"></li><li id="line29" class="line"><span class="hljs-comment">/**</span></li><li id="line30" class="line"><span class="hljs-comment"> * Some mobile browsers restrictions prevent programmatic playback of HTML5 video that hasn't been</span></li><li id="line31" class="line"><span class="hljs-comment"> * given permission via user interaction. This function is invoked on a user event to allow</span></li><li id="line32" class="line"><span class="hljs-comment"> * programmatic playback later.</span></li><li id="line33" class="line"><span class="hljs-comment"> *</span></li><li id="line34" class="line"><span class="hljs-comment"> * @param  {DOMElement} video - the video element</span></li><li id="line35" class="line"><span class="hljs-comment"> * @param  {Function} [cb] - invoked with the video</span></li><li id="line36" class="line"><span class="hljs-comment"> *</span></li><li id="line37" class="line"><span class="hljs-comment"> * @private</span></li><li id="line38" class="line"><span class="hljs-comment"> */</span></li><li id="line39" class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">warmVideoTubes</span>(<span class="hljs-params">video, cb</span>) </span>{</li><li id="line40" class="line">    <span class="hljs-keyword">if</span> (video.paused) {</li><li id="line41" class="line">        <span class="hljs-keyword">var</span> videoMuted = video.muted;</li><li id="line42" class="line">        <span class="hljs-keyword">var</span> videoTime = video.currentTime;</li><li id="line43" class="line"></li><li id="line44" class="line">        <span class="hljs-comment">// Because we can't set currentTime until the video metadata is loaded</span></li><li id="line45" class="line">        <span class="hljs-keyword">var</span> onLoadededMetadata = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line46" class="line">            video.removeEventListener(<span class="hljs-string">'loadedmetadata'</span>, onLoadededMetadata);</li><li id="line47" class="line">            video.currentTime = videoTime;</li><li id="line48" class="line">            <span class="hljs-keyword">if</span> (cb) {</li><li id="line49" class="line">                cb(video);</li><li id="line50" class="line">            }</li><li id="line51" class="line">        };</li><li id="line52" class="line"></li><li id="line53" class="line">        <span class="hljs-comment">// Play then immediately pause</span></li><li id="line54" class="line">        video.muted = <span class="hljs-literal">true</span>;</li><li id="line55" class="line">        video.play();</li><li id="line56" class="line">        video.pause();</li><li id="line57" class="line">        video.muted = videoMuted;</li><li id="line58" class="line">        <span class="hljs-keyword">if</span> (video.duration &gt;= <span class="hljs-number">0</span>) {</li><li id="line59" class="line">            onLoadededMetadata();</li><li id="line60" class="line">        } <span class="hljs-keyword">else</span> {</li><li id="line61" class="line">            video.addEventListener(<span class="hljs-string">'loadedmetadata'</span>, onLoadededMetadata);</li><li id="line62" class="line">        }</li><li id="line63" class="line">    }</li><li id="line64" class="line">}</li><li id="line65" class="line"></li><li id="line66" class="line"><span class="hljs-comment">/**</span></li><li id="line67" class="line"><span class="hljs-comment"> * Generate the markup for a Live Photo</span></li><li id="line68" class="line"><span class="hljs-comment"> *</span></li><li id="line69" class="line"><span class="hljs-comment"> * @param  {string} keyframeUrl - URL of the keyframe image asset</span></li><li id="line70" class="line"><span class="hljs-comment"> * @param  {string} videoUrl - URL of the Live Photo video asset</span></li><li id="line71" class="line"><span class="hljs-comment"> * @param  {number} stillImageTime - time (in seconds) that corresponds to the position of the</span></li><li id="line72" class="line"><span class="hljs-comment"> *         keyframe in the video</span></li><li id="line73" class="line"><span class="hljs-comment"> *</span></li><li id="line74" class="line"><span class="hljs-comment"> * @return {Object} object containing all of DOM elements used for the Live Photo</span></li><li id="line75" class="line"><span class="hljs-comment"> *</span></li><li id="line76" class="line"><span class="hljs-comment"> * @private</span></li><li id="line77" class="line"><span class="hljs-comment"> */</span></li><li id="line78" class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createLivePhotoElements</span>(<span class="hljs-params">keyframeUrl, videoUrl, stillImageTime</span>) </span>{</li><li id="line79" class="line">    <span class="hljs-keyword">var</span> container = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'div'</span>);</li><li id="line80" class="line">    container.className = <span class="hljs-string">'live-photo'</span>;</li><li id="line81" class="line">    container.setAttribute(<span class="hljs-string">'data-live-photo'</span>, <span class="hljs-string">''</span>);</li><li id="line82" class="line"></li><li id="line83" class="line">    <span class="hljs-keyword">var</span> img = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'img'</span>);</li><li id="line84" class="line">    img.className = <span class="hljs-string">'live-photo-keyframe'</span>;</li><li id="line85" class="line">    img.src = keyframeUrl;</li><li id="line86" class="line"></li><li id="line87" class="line">    <span class="hljs-keyword">var</span> postroll = createVideoElement(videoUrl, <span class="hljs-string">'live-photo-postroll'</span>, stillImageTime, <span class="hljs-literal">true</span>);</li><li id="line88" class="line">    <span class="hljs-keyword">var</span> video = createVideoElement(videoUrl, <span class="hljs-string">'live-photo-video'</span>);</li><li id="line89" class="line"></li><li id="line90" class="line">    <span class="hljs-keyword">var</span> icon = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'i'</span>);</li><li id="line91" class="line">    icon.className = <span class="hljs-string">'live-photo-icon'</span>;</li><li id="line92" class="line"></li><li id="line93" class="line">    container.appendChild(img);</li><li id="line94" class="line">    container.appendChild(postroll);</li><li id="line95" class="line">    container.appendChild(video);</li><li id="line96" class="line">    container.appendChild(icon);</li><li id="line97" class="line"></li><li id="line98" class="line">    <span class="hljs-keyword">return</span> {</li><li id="line99" class="line">        container: container,</li><li id="line100" class="line">        img: img,</li><li id="line101" class="line">        postroll: postroll,</li><li id="line102" class="line">        video: video,</li><li id="line103" class="line">        icon: icon,</li><li id="line104" class="line">    };</li><li id="line105" class="line">}</li><li id="line106" class="line"></li><li id="line107" class="line"><span class="hljs-comment">/**</span></li><li id="line108" class="line"><span class="hljs-comment"> * Determine which events should activate the Live Photo by default</span></li><li id="line109" class="line"><span class="hljs-comment"> *</span></li><li id="line110" class="line"><span class="hljs-comment"> * @return {Array} event names</span></li><li id="line111" class="line"><span class="hljs-comment"> *</span></li><li id="line112" class="line"><span class="hljs-comment"> * @private</span></li><li id="line113" class="line"><span class="hljs-comment"> */</span></li><li id="line114" class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultPlayEvents</span>(<span class="hljs-params"></span>) </span>{</li><li id="line115" class="line">    <span class="hljs-keyword">var</span> events = [<span class="hljs-string">'mousedown'</span>];</li><li id="line116" class="line">    <span class="hljs-keyword">if</span> (touchEnabled) {</li><li id="line117" class="line">        events.push(<span class="hljs-string">'touchstart'</span>);</li><li id="line118" class="line">    }</li><li id="line119" class="line">    <span class="hljs-keyword">return</span> events;</li><li id="line120" class="line">}</li><li id="line121" class="line"></li><li id="line122" class="line"><span class="hljs-comment">/**</span></li><li id="line123" class="line"><span class="hljs-comment"> * Determine which events should deactivate the Live Photo by default</span></li><li id="line124" class="line"><span class="hljs-comment"> *</span></li><li id="line125" class="line"><span class="hljs-comment"> * @return {Array} event names</span></li><li id="line126" class="line"><span class="hljs-comment"> *</span></li><li id="line127" class="line"><span class="hljs-comment"> * @private</span></li><li id="line128" class="line"><span class="hljs-comment"> */</span></li><li id="line129" class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultStopEvents</span>(<span class="hljs-params"></span>) </span>{</li><li id="line130" class="line">    <span class="hljs-keyword">var</span> events = [<span class="hljs-string">'mouseup'</span>, <span class="hljs-string">'mouseout'</span>];</li><li id="line131" class="line">    <span class="hljs-keyword">if</span> (touchEnabled) {</li><li id="line132" class="line">        events.push(<span class="hljs-string">'touchend'</span>);</li><li id="line133" class="line">    }</li><li id="line134" class="line">    <span class="hljs-keyword">return</span> events;</li><li id="line135" class="line">}</li><li id="line136" class="line"></li><li id="line137" class="line"><span class="hljs-comment">/**</span></li><li id="line138" class="line"><span class="hljs-comment"> * @classdesc Creates the necessary markup and provides the interface to interact with a Live Photo</span></li><li id="line139" class="line"><span class="hljs-comment"> *</span></li><li id="line140" class="line"><span class="hljs-comment"> * @param  {string} keyframeUrl - URL of the keyframe image asset</span></li><li id="line141" class="line"><span class="hljs-comment"> * @param  {string} videoUrl - URL of the Live Photo video asset</span></li><li id="line142" class="line"><span class="hljs-comment"> * @param  {number} stillImageTime - time (in seconds) that corresponds to the position of the</span></li><li id="line143" class="line"><span class="hljs-comment"> *         keyframe in the video</span></li><li id="line144" class="line"><span class="hljs-comment"> * @param  {Object} [options] - additional Live Photo options</span></li><li id="line145" class="line"><span class="hljs-comment"> *</span></li><li id="line146" class="line"><span class="hljs-comment"> * @constructor</span></li><li id="line147" class="line"><span class="hljs-comment"> */</span></li><li id="line148" class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">LivePhoto</span>(<span class="hljs-params">keyframeUrl, videoUrl, stillImageTime, options</span>) </span>{</li><li id="line149" class="line">    <span class="hljs-comment">// Silently correct when user forgets the `new` keyword</span></li><li id="line150" class="line">    <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> LivePhoto)) {</li><li id="line151" class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> LivePhoto(keyframeUrl, videoUrl, stillImageTime, options);</li><li id="line152" class="line">    }</li><li id="line153" class="line"></li><li id="line154" class="line">    <span class="hljs-comment">// Generate the elements from the options</span></li><li id="line155" class="line">    <span class="hljs-keyword">var</span> elements, replaceEl;</li><li id="line156" class="line">    <span class="hljs-keyword">if</span> (keyframeUrl <span class="hljs-keyword">instanceof</span> HTMLElement) {</li><li id="line157" class="line">        options = videoUrl;</li><li id="line158" class="line">        replaceEl = keyframeUrl;</li><li id="line159" class="line">        videoUrl = replaceEl.getAttribute(<span class="hljs-string">'data-live-photo'</span>);</li><li id="line160" class="line">        stillImageTime = <span class="hljs-built_in">parseFloat</span>(replaceEl.getAttribute(<span class="hljs-string">'data-live-photo-still-image-time'</span>));</li><li id="line161" class="line">        keyframeUrl = replaceEl.src;</li><li id="line162" class="line">    }</li><li id="line163" class="line"></li><li id="line164" class="line">    <span class="hljs-comment">// Handle options</span></li><li id="line165" class="line">    options || (options = {});</li><li id="line166" class="line">    <span class="hljs-keyword">this</span>.postrollMs = options.postrollMs || <span class="hljs-number">375</span>;</li><li id="line167" class="line">    <span class="hljs-keyword">this</span>.deactivateMs = options.deactivateMs || <span class="hljs-number">500</span>;</li><li id="line168" class="line">    <span class="hljs-keyword">this</span>.previewMs = options.previewMs || <span class="hljs-number">500</span>;</li><li id="line169" class="line"></li><li id="line170" class="line">    <span class="hljs-comment">// Video time that corresponds with the keyframe</span></li><li id="line171" class="line">    <span class="hljs-keyword">this</span>.stillImageTime = stillImageTime || <span class="hljs-literal">NaN</span>;</li><li id="line172" class="line"></li><li id="line173" class="line">    <span class="hljs-comment">// Create necessary DOM</span></li><li id="line174" class="line">    <span class="hljs-keyword">if</span> (!keyframeUrl &amp;&amp; !options.noErrors) {</li><li id="line175" class="line">        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'LivePhoto Error: Missing keyframeUrl'</span>);</li><li id="line176" class="line">    }</li><li id="line177" class="line">    <span class="hljs-keyword">if</span> (!videoUrl &amp;&amp; !options.noErrors) {</li><li id="line178" class="line">        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'LivePhoto Error: Missing videoUrl'</span>);</li><li id="line179" class="line">    }</li><li id="line180" class="line">    elements = createLivePhotoElements(keyframeUrl, videoUrl, stillImageTime);</li><li id="line181" class="line"></li><li id="line182" class="line">    <span class="hljs-comment">// Replace any existing element</span></li><li id="line183" class="line">    <span class="hljs-keyword">if</span> (replaceEl) {</li><li id="line184" class="line">        replaceEl.parentNode.insertBefore(elements.container, replaceEl);</li><li id="line185" class="line">        replaceEl.parentNode.removeChild(replaceEl);</li><li id="line186" class="line">    }</li><li id="line187" class="line"></li><li id="line188" class="line">    <span class="hljs-comment">// Save the elements</span></li><li id="line189" class="line">    <span class="hljs-keyword">this</span>.container = elements.container;</li><li id="line190" class="line">    <span class="hljs-keyword">this</span>.img = elements.img;</li><li id="line191" class="line">    <span class="hljs-keyword">this</span>.video = elements.video;</li><li id="line192" class="line">    <span class="hljs-keyword">this</span>.postroll = elements.postroll;</li><li id="line193" class="line">    <span class="hljs-keyword">this</span>.icon = elements.icon;</li><li id="line194" class="line"></li><li id="line195" class="line">    <span class="hljs-comment">// Bind video event handlers</span></li><li id="line196" class="line">    <span class="hljs-keyword">this</span>.__onVideoCanPlayThrough = <span class="hljs-keyword">this</span>._onVideoCanPlayThrough.bind(<span class="hljs-keyword">this</span>);</li><li id="line197" class="line">    <span class="hljs-keyword">this</span>.__onVideoLoadededMetadata = <span class="hljs-keyword">this</span>._onVideoLoadededMetadata.bind(<span class="hljs-keyword">this</span>);</li><li id="line198" class="line">    <span class="hljs-keyword">this</span>.__onPostrollTimeUpdate = <span class="hljs-keyword">this</span>._onPostrollTimeUpdate.bind(<span class="hljs-keyword">this</span>);</li><li id="line199" class="line">    <span class="hljs-keyword">this</span>.__startVideoPlayback = <span class="hljs-keyword">this</span>._startVideoPlayback.bind(<span class="hljs-keyword">this</span>);</li><li id="line200" class="line">    <span class="hljs-keyword">this</span>.__startPostrollPlayback = <span class="hljs-keyword">this</span>._startPostrollPlayback.bind(<span class="hljs-keyword">this</span>);</li><li id="line201" class="line">    <span class="hljs-keyword">this</span>.__resetPlayback = <span class="hljs-keyword">this</span>._resetPlayback.bind(<span class="hljs-keyword">this</span>);</li><li id="line202" class="line">    <span class="hljs-keyword">this</span>.__resetPreview = <span class="hljs-keyword">this</span>._resetPreview.bind(<span class="hljs-keyword">this</span>);</li><li id="line203" class="line"></li><li id="line204" class="line">    <span class="hljs-comment">// Get the duration from the video</span></li><li id="line205" class="line">    <span class="hljs-keyword">this</span>.video.addEventListener(<span class="hljs-string">'canplaythrough'</span>, <span class="hljs-keyword">this</span>.__onVideoCanPlayThrough);</li><li id="line206" class="line">    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.video.duration) {</li><li id="line207" class="line">        <span class="hljs-keyword">this</span>._setDuration(<span class="hljs-keyword">this</span>.video.duration);</li><li id="line208" class="line">        <span class="hljs-keyword">this</span>._resetPostroll();</li><li id="line209" class="line">    } <span class="hljs-keyword">else</span> {</li><li id="line210" class="line">        <span class="hljs-keyword">this</span>._setDuration(<span class="hljs-number">0</span>);</li><li id="line211" class="line">        <span class="hljs-keyword">this</span>.video.addEventListener(<span class="hljs-string">'loadedmetadata'</span>, <span class="hljs-keyword">this</span>.__onVideoLoadededMetadata);</li><li id="line212" class="line">    }</li><li id="line213" class="line"></li><li id="line214" class="line">    <span class="hljs-comment">// Set initial flags</span></li><li id="line215" class="line">    <span class="hljs-keyword">this</span>._playing = <span class="hljs-literal">false</span>;</li><li id="line216" class="line">    <span class="hljs-keyword">this</span>._canPlayThrough = <span class="hljs-literal">false</span>;</li><li id="line217" class="line">    <span class="hljs-keyword">this</span>._playWhenReady = <span class="hljs-literal">false</span>;</li><li id="line218" class="line"></li><li id="line219" class="line">    <span class="hljs-comment">// Add event listeners</span></li><li id="line220" class="line">    <span class="hljs-keyword">if</span> (options.useEventHandlers !== <span class="hljs-literal">false</span>) {</li><li id="line221" class="line">        <span class="hljs-keyword">this</span>._addEventHandlers(options.playEvents, options.stopEvents);</li><li id="line222" class="line">    }</li><li id="line223" class="line">}</li><li id="line224" class="line"></li><li id="line225" class="line">LivePhoto.prototype = {</li><li id="line226" class="line">    <span class="hljs-comment">/**</span></li><li id="line227" class="line"><span class="hljs-comment">     * Adds UI event listeners for Live Photo</span></li><li id="line228" class="line"><span class="hljs-comment">     *</span></li><li id="line229" class="line"><span class="hljs-comment">     * @param  {Array|function|string} playEvents - events that should initialize Live Photo playback</span></li><li id="line230" class="line"><span class="hljs-comment">     * @param  {Array|function|string} stopEvents - events that should interrupt Live Photo playback</span></li><li id="line231" class="line"><span class="hljs-comment">     *</span></li><li id="line232" class="line"><span class="hljs-comment">     * @private</span></li><li id="line233" class="line"><span class="hljs-comment">     */</span></li><li id="line234" class="line">    _addEventHandlers: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">playEvents, stopEvents</span>) </span>{</li><li id="line235" class="line">        <span class="hljs-keyword">var</span> container = <span class="hljs-keyword">this</span>.container;</li><li id="line236" class="line"></li><li id="line237" class="line">        <span class="hljs-keyword">var</span> bootstrapped = <span class="hljs-literal">false</span>;</li><li id="line238" class="line">        <span class="hljs-keyword">var</span> playVideo = <span class="hljs-keyword">this</span>.play.bind(<span class="hljs-keyword">this</span>);</li><li id="line239" class="line">        <span class="hljs-keyword">var</span> video = <span class="hljs-keyword">this</span>.video;</li><li id="line240" class="line">        <span class="hljs-keyword">var</span> postroll = <span class="hljs-keyword">this</span>.postroll;</li><li id="line241" class="line">        <span class="hljs-keyword">var</span> play = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{</li><li id="line242" class="line">            e.preventDefault();</li><li id="line243" class="line">            <span class="hljs-keyword">if</span> (bootstrapped) {</li><li id="line244" class="line">                playVideo();</li><li id="line245" class="line">            } <span class="hljs-keyword">else</span> {</li><li id="line246" class="line">                <span class="hljs-keyword">var</span> videoReady = <span class="hljs-literal">false</span>;</li><li id="line247" class="line">                <span class="hljs-keyword">var</span> postrollReady = <span class="hljs-literal">false</span>;</li><li id="line248" class="line">                warmVideoTubes(video, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line249" class="line">                    videoReady = <span class="hljs-literal">true</span>;</li><li id="line250" class="line">                    <span class="hljs-keyword">if</span> (postrollReady) {</li><li id="line251" class="line">                        playVideo();</li><li id="line252" class="line">                    }</li><li id="line253" class="line">                });</li><li id="line254" class="line">                warmVideoTubes(postroll, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line255" class="line">                    postrollReady = <span class="hljs-literal">true</span>;</li><li id="line256" class="line">                    <span class="hljs-keyword">if</span> (videoReady) {</li><li id="line257" class="line">                        playVideo();</li><li id="line258" class="line">                    }</li><li id="line259" class="line">                });</li><li id="line260" class="line">                bootstrapped = <span class="hljs-literal">true</span>;</li><li id="line261" class="line">            }</li><li id="line262" class="line">        };</li><li id="line263" class="line">        (playEvents &amp;&amp; playEvents !== <span class="hljs-literal">false</span>) || (playEvents = defaultPlayEvents);</li><li id="line264" class="line">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> playEvents === <span class="hljs-string">'function'</span>) {</li><li id="line265" class="line">            playEvents = playEvents(<span class="hljs-keyword">this</span>);</li><li id="line266" class="line">        }</li><li id="line267" class="line">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> playEvents === <span class="hljs-string">'string'</span>) {</li><li id="line268" class="line">            playEvents = playEvents.split(<span class="hljs-regexp">/[,\s]+/</span>);</li><li id="line269" class="line">        }</li><li id="line270" class="line">        playEvents.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">playEvent</span>) </span>{</li><li id="line271" class="line">            <span class="hljs-keyword">if</span> (playEvent) {</li><li id="line272" class="line">                container.addEventListener(playEvent, play);</li><li id="line273" class="line">            }</li><li id="line274" class="line">        });</li><li id="line275" class="line"></li><li id="line276" class="line">        <span class="hljs-keyword">var</span> stopVideo = <span class="hljs-keyword">this</span>.stop.bind(<span class="hljs-keyword">this</span>);</li><li id="line277" class="line">        <span class="hljs-keyword">var</span> stop = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{</li><li id="line278" class="line">            e.preventDefault();</li><li id="line279" class="line">            stopVideo();</li><li id="line280" class="line">        };</li><li id="line281" class="line">        (stopEvents &amp;&amp; stopEvents !== <span class="hljs-literal">false</span>) || (stopEvents = defaultStopEvents);</li><li id="line282" class="line">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> stopEvents === <span class="hljs-string">'function'</span>) {</li><li id="line283" class="line">            stopEvents = stopEvents(<span class="hljs-keyword">this</span>);</li><li id="line284" class="line">        }</li><li id="line285" class="line">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> stopEvents === <span class="hljs-string">'string'</span>) {</li><li id="line286" class="line">            stopEvents = stopEvents.split(<span class="hljs-regexp">/[,\s]+/</span>);</li><li id="line287" class="line">        }</li><li id="line288" class="line">        stopEvents.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">stopEvent</span>) </span>{</li><li id="line289" class="line">            <span class="hljs-keyword">if</span> (stopEvent) {</li><li id="line290" class="line">                container.addEventListener(stopEvent, stop);</li><li id="line291" class="line">            }</li><li id="line292" class="line">        });</li><li id="line293" class="line">    },</li><li id="line294" class="line"></li><li id="line295" class="line">    <span class="hljs-comment">/**</span></li><li id="line296" class="line"><span class="hljs-comment">     * Handles first `canplaythrough` event, indicating that the Live Photo is ready for interactive playback</span></li><li id="line297" class="line"><span class="hljs-comment">     *</span></li><li id="line298" class="line"><span class="hljs-comment">     * @private</span></li><li id="line299" class="line"><span class="hljs-comment">     */</span></li><li id="line300" class="line">    _onVideoCanPlayThrough: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line301" class="line">        <span class="hljs-keyword">this</span>._canPlayThrough = <span class="hljs-literal">true</span>;</li><li id="line302" class="line">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._playWhenReady) {</li><li id="line303" class="line">            <span class="hljs-keyword">this</span>._playWhenReady = <span class="hljs-literal">false</span>;</li><li id="line304" class="line">            <span class="hljs-keyword">this</span>.play();</li><li id="line305" class="line">        }</li><li id="line306" class="line">        <span class="hljs-keyword">this</span>.container.classList.remove(<span class="hljs-string">'loading'</span>);</li><li id="line307" class="line">        <span class="hljs-keyword">this</span>.video.removeEventListener(<span class="hljs-string">'canplaythrough'</span>, <span class="hljs-keyword">this</span>.__onVideoCanPlayThrough);</li><li id="line308" class="line">    },</li><li id="line309" class="line"></li><li id="line310" class="line">    <span class="hljs-comment">/**</span></li><li id="line311" class="line"><span class="hljs-comment">     * Handles the first `loadedmetadata` event, indicating that the video duration is available</span></li><li id="line312" class="line"><span class="hljs-comment">     * and that seeking is available</span></li><li id="line313" class="line"><span class="hljs-comment">     *</span></li><li id="line314" class="line"><span class="hljs-comment">     * @private</span></li><li id="line315" class="line"><span class="hljs-comment">     */</span></li><li id="line316" class="line">    _onVideoLoadededMetadata: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line317" class="line">        <span class="hljs-keyword">this</span>._setDuration(<span class="hljs-keyword">this</span>.video.duration || <span class="hljs-number">0</span>);</li><li id="line318" class="line">        <span class="hljs-keyword">this</span>._resetPostroll();</li><li id="line319" class="line">        <span class="hljs-keyword">this</span>.video.removeEventListener(<span class="hljs-string">'loadedmetadata'</span>, <span class="hljs-keyword">this</span>.__onVideoLoadededMetadata);</li><li id="line320" class="line">    },</li><li id="line321" class="line"></li><li id="line322" class="line">    <span class="hljs-comment">/**</span></li><li id="line323" class="line"><span class="hljs-comment">     * Used to determine when the Live Photo "preview" should stop</span></li><li id="line324" class="line"><span class="hljs-comment">     *</span></li><li id="line325" class="line"><span class="hljs-comment">     * @private</span></li><li id="line326" class="line"><span class="hljs-comment">     */</span></li><li id="line327" class="line">    _onPostrollTimeUpdate: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{</li><li id="line328" class="line">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.postroll.currentTime &gt;= <span class="hljs-keyword">this</span>.stillImageTime - <span class="hljs-number">0.1</span>) {</li><li id="line329" class="line">            <span class="hljs-keyword">this</span>._resetPreview();</li><li id="line330" class="line">        }</li><li id="line331" class="line">    },</li><li id="line332" class="line"></li><li id="line333" class="line">    <span class="hljs-comment">/**</span></li><li id="line334" class="line"><span class="hljs-comment">     * Cleans up any timeouts and event listeners used during Live Photo playback</span></li><li id="line335" class="line"><span class="hljs-comment">     *</span></li><li id="line336" class="line"><span class="hljs-comment">     * @private</span></li><li id="line337" class="line"><span class="hljs-comment">     */</span></li><li id="line338" class="line">    _clearTimeouts: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line339" class="line">        clearTimeout(<span class="hljs-keyword">this</span>._resetVideoTimeout);</li><li id="line340" class="line">        clearTimeout(<span class="hljs-keyword">this</span>._resetPostrollTimeout);</li><li id="line341" class="line">        clearTimeout(<span class="hljs-keyword">this</span>._resetPreviewTimeout);</li><li id="line342" class="line">        <span class="hljs-keyword">this</span>.postroll.removeEventListener(<span class="hljs-string">'timeupdate'</span>, <span class="hljs-keyword">this</span>.__onPostrollTimeUpdate);</li><li id="line343" class="line">    },</li><li id="line344" class="line"></li><li id="line345" class="line">    <span class="hljs-comment">/**</span></li><li id="line346" class="line"><span class="hljs-comment">     * Sets the duration of the video, which may be used to estimate the still image and preview</span></li><li id="line347" class="line"><span class="hljs-comment">     * playback start times</span></li><li id="line348" class="line"><span class="hljs-comment">     *</span></li><li id="line349" class="line"><span class="hljs-comment">     * @param  {number} duration - video duration in seconds</span></li><li id="line350" class="line"><span class="hljs-comment">     *</span></li><li id="line351" class="line"><span class="hljs-comment">     * @private</span></li><li id="line352" class="line"><span class="hljs-comment">     */</span></li><li id="line353" class="line">    _setDuration: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">duration</span>) </span>{</li><li id="line354" class="line">        <span class="hljs-keyword">this</span>.duration = duration;</li><li id="line355" class="line">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.stillImageTime !== <span class="hljs-string">'number'</span> || <span class="hljs-built_in">isNaN</span>(<span class="hljs-keyword">this</span>.stillImageTime)) {</li><li id="line356" class="line">            <span class="hljs-comment">// com.apple.quicktime.still-image-time</span></li><li id="line357" class="line">            <span class="hljs-comment">// The real keyframe time is stored in the metadata, but if we don't have it, assume</span></li><li id="line358" class="line">            <span class="hljs-comment">// that we should start in the middle instead</span></li><li id="line359" class="line">            <span class="hljs-keyword">this</span>.stillImageTime = duration * <span class="hljs-number">0.5</span>;</li><li id="line360" class="line">        }</li><li id="line361" class="line">        <span class="hljs-keyword">this</span>.previewStart = <span class="hljs-built_in">Math</span>.max(<span class="hljs-number">0</span>, <span class="hljs-keyword">this</span>.stillImageTime - <span class="hljs-keyword">this</span>.previewMs / <span class="hljs-number">1000</span>);</li><li id="line362" class="line">    },</li><li id="line363" class="line"></li><li id="line364" class="line">    <span class="hljs-comment">/**</span></li><li id="line365" class="line"><span class="hljs-comment">     * Pauses the postroll and reset to the still image time</span></li><li id="line366" class="line"><span class="hljs-comment">     *</span></li><li id="line367" class="line"><span class="hljs-comment">     * @private</span></li><li id="line368" class="line"><span class="hljs-comment">     */</span></li><li id="line369" class="line">    _resetPostroll: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line370" class="line">        <span class="hljs-keyword">this</span>.postroll.pause();</li><li id="line371" class="line">        <span class="hljs-keyword">this</span>.postroll.currentTime = <span class="hljs-keyword">this</span>.stillImageTime;</li><li id="line372" class="line">    },</li><li id="line373" class="line"></li><li id="line374" class="line">    <span class="hljs-comment">/**</span></li><li id="line375" class="line"><span class="hljs-comment">     * Pauses the video and reset to the beginning</span></li><li id="line376" class="line"><span class="hljs-comment">     *</span></li><li id="line377" class="line"><span class="hljs-comment">     * @private</span></li><li id="line378" class="line"><span class="hljs-comment">     */</span></li><li id="line379" class="line">    _resetVideo: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line380" class="line">        <span class="hljs-keyword">this</span>.video.pause();</li><li id="line381" class="line">        <span class="hljs-keyword">this</span>.video.currentTime = <span class="hljs-number">0</span>;</li><li id="line382" class="line">        <span class="hljs-keyword">this</span>.video.muted = <span class="hljs-literal">false</span>;</li><li id="line383" class="line">    },</li><li id="line384" class="line"></li><li id="line385" class="line">    <span class="hljs-comment">/**</span></li><li id="line386" class="line"><span class="hljs-comment">     * Starts video playback, interrupting any postroll playback</span></li><li id="line387" class="line"><span class="hljs-comment">     *</span></li><li id="line388" class="line"><span class="hljs-comment">     * @private</span></li><li id="line389" class="line"><span class="hljs-comment">     */</span></li><li id="line390" class="line">    _startVideoPlayback: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line391" class="line">        <span class="hljs-keyword">this</span>.video.play();</li><li id="line392" class="line">        <span class="hljs-keyword">this</span>._resetPostroll();</li><li id="line393" class="line">    },</li><li id="line394" class="line"></li><li id="line395" class="line">    <span class="hljs-comment">/**</span></li><li id="line396" class="line"><span class="hljs-comment">     * Restarts postroll playback</span></li><li id="line397" class="line"><span class="hljs-comment">     *</span></li><li id="line398" class="line"><span class="hljs-comment">     * @private</span></li><li id="line399" class="line"><span class="hljs-comment">     */</span></li><li id="line400" class="line">    _startPostrollPlayback: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line401" class="line">        <span class="hljs-keyword">this</span>._resetPostroll();</li><li id="line402" class="line">        <span class="hljs-keyword">this</span>.postroll.play();</li><li id="line403" class="line">    },</li><li id="line404" class="line"></li><li id="line405" class="line">    <span class="hljs-comment">/**</span></li><li id="line406" class="line"><span class="hljs-comment">     * Resets Live Photo playback, including both the video and the postroll</span></li><li id="line407" class="line"><span class="hljs-comment">     *</span></li><li id="line408" class="line"><span class="hljs-comment">     * @private</span></li><li id="line409" class="line"><span class="hljs-comment">     */</span></li><li id="line410" class="line">    _resetPlayback: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line411" class="line">        <span class="hljs-keyword">this</span>._playing = <span class="hljs-literal">false</span>;</li><li id="line412" class="line">        <span class="hljs-keyword">this</span>._resetVideo();</li><li id="line413" class="line">        <span class="hljs-keyword">this</span>._resetPostroll();</li><li id="line414" class="line">    },</li><li id="line415" class="line"></li><li id="line416" class="line">    <span class="hljs-comment">/**</span></li><li id="line417" class="line"><span class="hljs-comment">     * Stops Live Photo preview playback, resetting the postroll</span></li><li id="line418" class="line"><span class="hljs-comment">     *</span></li><li id="line419" class="line"><span class="hljs-comment">     * @private</span></li><li id="line420" class="line"><span class="hljs-comment">     */</span></li><li id="line421" class="line">    _resetPreview: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line422" class="line">        <span class="hljs-keyword">this</span>.postroll.removeEventListener(<span class="hljs-string">'timeupdate'</span>, <span class="hljs-keyword">this</span>.__onPostrollTimeUpdate);</li><li id="line423" class="line">        <span class="hljs-keyword">this</span>._resetPostroll();</li><li id="line424" class="line">        <span class="hljs-keyword">this</span>.container.classList.remove(<span class="hljs-string">'preview'</span>);</li><li id="line425" class="line">    },</li><li id="line426" class="line"></li><li id="line427" class="line">    <span class="hljs-comment">/**</span></li><li id="line428" class="line"><span class="hljs-comment">     * Loads the media for the video and preroll</span></li><li id="line429" class="line"><span class="hljs-comment">     *</span></li><li id="line430" class="line"><span class="hljs-comment">     * @method</span></li><li id="line431" class="line"><span class="hljs-comment">     */</span></li><li id="line432" class="line">    load: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line433" class="line">        <span class="hljs-keyword">this</span>.video.load();</li><li id="line434" class="line">        <span class="hljs-keyword">this</span>.postroll.load();</li><li id="line435" class="line">    },</li><li id="line436" class="line"></li><li id="line437" class="line">    <span class="hljs-comment">/**</span></li><li id="line438" class="line"><span class="hljs-comment">     * Starts Live Photo playback from the beginning, if it is not already playing</span></li><li id="line439" class="line"><span class="hljs-comment">     *</span></li><li id="line440" class="line"><span class="hljs-comment">     * @method</span></li><li id="line441" class="line"><span class="hljs-comment">     */</span></li><li id="line442" class="line">    play: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line443" class="line">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._playing) {</li><li id="line444" class="line">            <span class="hljs-keyword">return</span>;</li><li id="line445" class="line">        }</li><li id="line446" class="line"></li><li id="line447" class="line">        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._canPlayThrough) {</li><li id="line448" class="line">            <span class="hljs-keyword">this</span>._playWhenReady = <span class="hljs-literal">true</span>;</li><li id="line449" class="line">            <span class="hljs-keyword">this</span>._clearTimeouts();</li><li id="line450" class="line">            <span class="hljs-keyword">this</span>.load();</li><li id="line451" class="line">            <span class="hljs-keyword">this</span>.container.classList.add(<span class="hljs-string">'loading'</span>);</li><li id="line452" class="line">            <span class="hljs-keyword">return</span>;</li><li id="line453" class="line">        }</li><li id="line454" class="line"></li><li id="line455" class="line">        <span class="hljs-keyword">this</span>._playing = <span class="hljs-literal">true</span>;</li><li id="line456" class="line">        <span class="hljs-keyword">this</span>._clearTimeouts();</li><li id="line457" class="line"></li><li id="line458" class="line">        <span class="hljs-keyword">this</span>._startPostrollPlayback();</li><li id="line459" class="line">        <span class="hljs-keyword">this</span>.video.currentTime = <span class="hljs-number">0</span>;</li><li id="line460" class="line">        <span class="hljs-keyword">this</span>._resetPostrollTimeout = setTimeout(<span class="hljs-keyword">this</span>.__startVideoPlayback, <span class="hljs-keyword">this</span>.postrollMs);</li><li id="line461" class="line">        <span class="hljs-keyword">this</span>.container.classList.add(<span class="hljs-string">'active'</span>);</li><li id="line462" class="line">    },</li><li id="line463" class="line"></li><li id="line464" class="line">    <span class="hljs-comment">/**</span></li><li id="line465" class="line"><span class="hljs-comment">     * Stops Live Photo playback and returns to the inactive state</span></li><li id="line466" class="line"><span class="hljs-comment">     *</span></li><li id="line467" class="line"><span class="hljs-comment">     * @method</span></li><li id="line468" class="line"><span class="hljs-comment">     */</span></li><li id="line469" class="line">    stop: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line470" class="line">        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._playing) {</li><li id="line471" class="line">            <span class="hljs-keyword">return</span>;</li><li id="line472" class="line">        }</li><li id="line473" class="line"></li><li id="line474" class="line">        <span class="hljs-keyword">this</span>.video.muted = <span class="hljs-literal">true</span>;</li><li id="line475" class="line">        <span class="hljs-keyword">this</span>._clearTimeouts();</li><li id="line476" class="line">        <span class="hljs-keyword">this</span>.container.classList.remove(<span class="hljs-string">'active'</span>);</li><li id="line477" class="line"></li><li id="line478" class="line">        <span class="hljs-keyword">this</span>._resetVideoTimeout = setTimeout(<span class="hljs-keyword">this</span>.__resetPlayback, <span class="hljs-keyword">this</span>.deactivateMs);</li><li id="line479" class="line">    },</li><li id="line480" class="line"></li><li id="line481" class="line">    <span class="hljs-comment">/**</span></li><li id="line482" class="line"><span class="hljs-comment">     * Plays the Live Photo preview, which is about one second starting from the still image time</span></li><li id="line483" class="line"><span class="hljs-comment">     *</span></li><li id="line484" class="line"><span class="hljs-comment">     * @method</span></li><li id="line485" class="line"><span class="hljs-comment">     */</span></li><li id="line486" class="line">    preview: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line487" class="line">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._playing) {</li><li id="line488" class="line">            <span class="hljs-keyword">return</span>;</li><li id="line489" class="line">        }</li><li id="line490" class="line"></li><li id="line491" class="line">        <span class="hljs-keyword">this</span>._clearTimeouts();</li><li id="line492" class="line"></li><li id="line493" class="line">        <span class="hljs-keyword">this</span>.postroll.currentTime = <span class="hljs-keyword">this</span>.previewStart;</li><li id="line494" class="line">        <span class="hljs-keyword">this</span>.postroll.play();</li><li id="line495" class="line">        <span class="hljs-keyword">this</span>.container.classList.add(<span class="hljs-string">'preview'</span>);</li><li id="line496" class="line"></li><li id="line497" class="line">        <span class="hljs-keyword">this</span>._previewCompleteTimeout = setTimeout(<span class="hljs-keyword">this</span>.__resetPreview, <span class="hljs-number">1000</span> * (<span class="hljs-keyword">this</span>.stillImageTime - <span class="hljs-keyword">this</span>.previewStart));</li><li id="line498" class="line"></li><li id="line499" class="line">        <span class="hljs-comment">// The preview is over once we hit the correct time</span></li><li id="line500" class="line">        <span class="hljs-keyword">this</span>.postroll.addEventListener(<span class="hljs-string">'timeupdate'</span>, <span class="hljs-keyword">this</span>.__onPostrollTimeUpdate);</li><li id="line501" class="line">    },</li><li id="line502" class="line">};</li><li id="line503" class="line"></li><li id="line504" class="line"><span class="hljs-built_in">module</span>.exports = LivePhoto;</li><li id="line505" class="line"></li></ol></code></pre>
        </article>
    </section>





</div>

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Fri Aug 19 2016 14:20:11 GMT-0400 (EDT) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script src="scripts/main.js"></script>
</body>
</html>
